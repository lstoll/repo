#!/usr/bin/env bash
set -euo pipefail

echo "--> Setting defaults"
defaults write com.googlecode.iterm2 "PrefsCustomFolder" -string "$HOME/.config/iterm2"
defaults write com.googlecode.iterm2 "LoadPrefsFromCustomFolder" -bool true

if [ ! -f /usr/local/bin/brew ]; then
    echo "--> Installing Homebrew"
    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

echo "--> Running brew bundle"
brew bundle

echo "--> Setting up go things"
go get -u github.com/alecthomas/gometalinter
gometalinter --install
go get -u github.com/kardianos/govendor
go get -u github.com/rogpeppe/godef
go get -u github.com/nsf/gocode
go get -u golang.org/x/tools/cmd/gorename
go get -u golang.org/x/tools/cmd/guru
